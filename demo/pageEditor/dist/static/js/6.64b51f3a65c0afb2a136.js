webpackJsonp([6],{BdS9:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("woOf"),l=a.n(s),i=a("Dd8w"),r=a.n(i),o=a("gyMJ"),n=a("NYxO"),u=(a("fAxu"),a("x8XE")),p=a.n(u),c={components:{},watch:{},data:function(){return{listData:[],loading:!1,page:1,pageSize:10,total:0,whiteAuthStatus:p.a.whiteAuthStatus,auditorList:[],proposerList:[],searchObj:{auditTime:null,proposedTime:null,status:0,audit_start:null,audit_end:null,proposed_start:null,proposed_end:null,proposer:null,auditor:null},dialogVisible:!1,detailTable:[]}},computed:r()({},Object(n.b)(["getUserInfo"])),created:function(){this.getWhiteParams(),this.getList()},mounted:function(){},methods:{getWhiteParams:function(){var t=this;this.$axios.get(o.a.whiteParamsApi,{params:{}}).then(function(e){t.auditorList=e.data.result.auditor,t.proposerList=e.data.result.proposer}).catch(function(t){console.log(t)})},getList:function(){var t=this;this.loading=!0;var e={audit_start:this.searchObj.auditTime?this.searchObj.auditTime[0]:null,audit_end:this.searchObj.auditTime?this.searchObj.auditTime[1]:null,proposed_start:this.searchObj.proposedTime?this.searchObj.proposedTime[0]:null,proposed_end:this.searchObj.proposedTime?this.searchObj.proposedTime[1]:null,status:this.searchObj.status,proposer:this.searchObj.proposer,auditor:this.searchObj.auditor};this.$axios.get(o.a.whiteAuditListApi,{params:r()({page:this.page-1,page_size:this.pageSize},e)}).then(function(e){t.loading=!1,t.listData=(e.data.result||{}).list||[],t.total=Number((e.data.result||{}).total||0)}).catch(function(e){t.loading=!1,console.log(e)})},search:function(){this.page=1,this.getList()},reset:function(){this.searchObj=l()(this.searchObj,{auditTime:null,proposedTime:null,audit_start:null,audit_end:null,proposed_start:null,proposed_end:null,proposer:null,auditor:null})},doOperate:function(t,e){var a=this;4!==e.operate_status&&1!==e.operate_status?this.$confirm("是否确认"+e.label+"申请，"+e.label+"后"+(2===e.operate_status?"立即生效，不可撤回":"可以撤回"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.operateAuth({apply_seq:t.apply_seq,status:e.operate_status,auditor:a.getUserInfo.name})}).catch(function(t){console.log(t)}):this.operateAuth({apply_seq:t.apply_seq,status:e.operate_status,auditor:this.getUserInfo.name})},operateAuth:function(t){var e=this;this.loading=!0,this.$axios.post(o.a.whiteAuditApi,t).then(function(t){if(e.loading=!1,t.data.errorNo&&t.data.errorMsg){var a=t.data.errorMsg.replace(/,/g,"<br/>");e.$message.warning({dangerouslyUseHTMLString:!0,message:"<pre>"+a+"</pre>"})}else e.$message.success("操作成功！");e.getList()})},doDetail:function(t){var e=this;this.detailTable=[],this.dialogVisible=!0,this.$axios.get(o.a.whiteDetailApi,{params:{apply_seq:t.apply_seq}}).then(function(t){e.detailTable=t.data.result})},getListbyPage:function(t){this.page=t,this.getList()}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"search-box mt20"},[a("div",{staticClass:"field"},[a("label",[t._v("申请人")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.searchObj.proposer,callback:function(e){t.$set(t.searchObj,"proposer",e)},expression:"searchObj.proposer"}},t._l(t.proposerList,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}))],1),t._v(" "),a("div",{staticClass:"field"},[a("label",[t._v("审核人")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.searchObj.auditor,callback:function(e){t.$set(t.searchObj,"auditor",e)},expression:"searchObj.auditor"}},t._l(t.auditorList,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}))],1),t._v(" "),a("div",{staticClass:"field"},[a("label",[t._v("申请日期")]),t._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:t.searchObj.proposedTime,callback:function(e){t.$set(t.searchObj,"proposedTime",e)},expression:"searchObj.proposedTime"}})],1),t._v(" "),a("div",{staticClass:"field"},[a("label",[t._v("审核日期")]),t._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:t.searchObj.auditTime,callback:function(e){t.$set(t.searchObj,"auditTime",e)},expression:"searchObj.auditTime"}})],1),t._v(" "),a("div",{staticClass:"field"},[a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")]),t._v(" "),a("el-button",{on:{click:t.reset}},[t._v("重置")])],1)]),t._v(" "),a("div",{},[a("el-radio-group",{on:{change:t.search},model:{value:t.searchObj.status,callback:function(e){t.$set(t.searchObj,"status",e)},expression:"searchObj.status"}},t._l(t.whiteAuthStatus,function(e){return a("el-radio-button",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])}))],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"mt10",attrs:{border:"",data:t.listData}},[a("el-table-column",{attrs:{prop:"title",label:"申请人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"created_at",label:"申请时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"audit_at",label:"审核时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"auditor",label:"审核人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"审核结果"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.operateList||[],function(s){return a("el-button",{key:s.operate_status,attrs:{type:"text",size:"small"},on:{click:function(a){t.doOperate(e.row,s)}}},[t._v(t._s(s.label))])}),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.doDetail(e.row)}}},[t._v("查看详情")])]}}])})],1),t._v(" "),t.listData.length>0?a("div",{staticClass:"pag-block"},[a("div",{staticClass:"fl"},[t._v("每页"+t._s(t.pageSize)+"条，共 "+t._s(t.total)+" 条记录 第 "+t._s(t.page)+"/"+t._s(t.total)+" 页")]),t._v(" "),a("el-pagination",{staticClass:"fr",attrs:{"current-page":t.page,background:"",layout:"prev, pager, next, jumper","page-size":t.pageSize,total:t.total},on:{"current-change":t.getListbyPage}})],1):t._e(),t._v(" "),a("el-dialog",{attrs:{title:"审核详情",visible:t.dialogVisible,width:"800px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-table",{attrs:{border:"",data:t.detailTable}},[a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"uid",label:"ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"职务说明"}}),t._v(" "),a("el-table-column",{attrs:{prop:"rule_type",label:"开通级别"}}),t._v(" "),a("el-table-column",{attrs:{prop:"user_type",label:"用户类型"}})],1)],1)],1)},staticRenderFns:[]};var h=a("VU/8")(c,d,!1,function(t){a("c+X0")},"data-v-e26d0d36",null);e.default=h.exports},"c+X0":function(t,e){}});
//# sourceMappingURL=6.64b51f3a65c0afb2a136.js.map