webpackJsonp([12],{IcnI:function(e,t,n){"use strict";var i=n("7+uW"),a=n("NYxO"),s=n("woOf"),o=n.n(s),r=n("gyMJ"),u=n("mtWM"),p=n.n(u),c=n("L/O1"),l=n("T452"),h=l.a.global[l.a.env].client_id,d=l.a.global[l.a.env].system_id;var m={state:{loginInfo:{hasRequest:!1,isLogin:!1,username:""},userInfo:{},permissionData:{},adminLevel:0},getters:{getInitialInfo:function(e){return e},getLoginInfo:function(e){return e.loginInfo},getUserInfo:function(e){return e.userInfo},getPermissionData:function(e){return e.permissionData},getAdminLevel:function(e){return e.adminLevel}},mutations:{setLoginInfo:function(e,t){o()(e.loginInfo,t)},setUserInfo:function(e,t){o()(e.userInfo,t)},setPermissionData:function(e,t){o()(e.permissionData,t);var n=0;t.permList.indexOf("/applicationManage/whiteApplication")>=0&&t.permList.indexOf("/applicationManage/whiteReview")>=0&&t.permList.indexOf("/userManage/userInfo")>=0&&t.permList.indexOf("/userManage/userRelation")>=0?n=4:t.permList.indexOf("/userManage/userInfo")>=0&&t.permList.indexOf("/userManage/userRelation")>=0?n=1:t.permList.indexOf("/applicationManage/whiteApplication")>=0?n=2:t.permList.indexOf("/applicationManage/whiteReview")>=0&&(n=3),e.adminLevel=n}},actions:{checkLogin:function(e,t){var n=e.commit,i=e.state,a=(t.params,t.success),s=t.error,o=t.force,u=void 0!==o&&o;if(!c.a.get("ticket"))return n("setLoginInfo",{isLogin:!1,hasRequest:!1}),void(s&&s());u||!i.loginInfo.hasRequest?p.a.all([p.a.post(r.a.getUserInfoApi,{ticket:c.a.get("ticket"),client_id:h,systemId:d}),p.a.post(r.a.getUserPermissionApi,{ticket:c.a.get("ticket"),client_id:h,systemId:d})]).then(p.a.spread(function(e,t){n("setLoginInfo",{hasRequest:!0,isLogin:!0}),n("setUserInfo",e.data),n("setPermissionData",t.data),a&&a({userInfo:e.data,permissionData:t.data})})).catch(function(e){console.log(e),s&&s()}):i.loginInfo.isLogin?a&&a(i):s&&s()},doLogin:function(e,t){var n=e.commit,i=(e.state,t.params),a=void 0===i?{}:i,s=t.success,o=t.error;return p.a.post(r.a.loginApi,a).then(function(e){c.a.set("ticket",e.data.ticket),n("setLoginInfo",{islogin:!0,username:a.account}),s&&s(e.data)}).catch(function(e){o&&o(e)})},doLogout:function(e,t){e.commit,e.state,t.params;var n=t.success;t.error;c.a.clearAll(),n&&n()}}};i.default.use(a.a);t.a=new a.a.Store({state:{},modules:{login:m},getters:{},mutations:{}})},"L/O1":function(e,t,n){"use strict";var i={set:function(e,t,n,i,a){if(a){var s=new Date;s.setTime(s.getTime()+36e5*a)}return document.cookie=e+"="+t+"; "+(a?"expires="+s.toGMTString()+"; ":"")+(i?"path="+i+"; ":"path=/; ")+(n?"domain="+n+";":"domain="+document.location.hostname+";"),!0},get:function(e){var t=new RegExp("(?:^|;+|\\s+)"+e+"=([^;]*)"),n=document.cookie.match(t);return n?n[1]:""},del:function(e,t,n){document.cookie=e+"=; expires=Mon, 26 Jul 1997 05:00:00 GMT; "+(n?"path="+n+"; ":"path=/; ")+(t?"domain="+t+";":"domain="+document.location.hostname+";")},clearAll:function(){var e=document.cookie.match(/[^=;]+(?=)/g);if(e)for(var t=e.length;t--;)this.del(e[t])}};t.a=i},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("tvR6");var i=n("zL8q"),a=n.n(i),s=n("//Fk"),o=n.n(s),r=n("mtWM"),u=n.n(r),p=n("L/O1"),c=n("7+uW"),l=n("/ocq");c.default.use(l.a);var h=new l.a({routes:[{path:"/login",name:"login",component:function(e){return Promise.all([n.e(0),n.e(1)]).then(function(){var t=[n("xJsL")];e.apply(null,t)}.bind(this)).catch(n.oe)},meta:{whitePath:!0,subtitle:"运营管理后台"}},{path:"/systemTip",name:"systemTip",component:function(e){return n.e(5).then(function(){var t=[n("AQ7P")];e.apply(null,t)}.bind(this)).catch(n.oe)},meta:{whitePath:!0,subtitle:"运营管理后台"}},{path:"/upload",name:"upload",component:function(e){return n.e(2).then(function(){var t=[n("jd+X")];e.apply(null,t)}.bind(this)).catch(n.oe)},meta:{whitePath:!0,subtitle:"运营管理后台"}},{path:"/",name:"index",redirect:"/userManage/userInfo",component:function(e){return n.e(3).then(function(){var t=[n("42Hy")];e.apply(null,t)}.bind(this)).catch(n.oe)},children:[{path:"userManage",name:"userManage",component:function(e){return n.e(9).then(function(){var t=[n("DIKW")];e.apply(null,t)}.bind(this)).catch(n.oe)},meta:{subtitle:"用户信息查询"},children:[{path:"userInfo",name:"userInfo",component:function(e){return Promise.all([n.e(0),n.e(8)]).then(function(){var t=[n("uutV")];e.apply(null,t)}.bind(this)).catch(n.oe)},meta:{subtitle:"用户信息查询"}},{path:"userRelation",name:"userRelation",component:function(e){return Promise.all([n.e(0),n.e(7)]).then(function(){var t=[n("vlsn")];e.apply(null,t)}.bind(this)).catch(n.oe)},meta:{subtitle:"用户关系管理"}}]},{path:"applicationManage",name:"applicationManage",component:function(e){return n.e(10).then(function(){var t=[n("zhDP")];e.apply(null,t)}.bind(this)).catch(n.oe)},meta:{subtitle:"申请管理"},children:[{path:"whiteApplication",name:"whiteApplication",component:function(e){return Promise.all([n.e(0),n.e(4)]).then(function(){var t=[n("rgt0")];e.apply(null,t)}.bind(this)).catch(n.oe)},meta:{subtitle:"申请开通白名单"}},{path:"whiteReview",name:"whiteReview",component:function(e){return Promise.all([n.e(0),n.e(6)]).then(function(){var t=[n("BdS9")];e.apply(null,t)}.bind(this)).catch(n.oe)},meta:{subtitle:"白名单审核"}}]}]},{path:"*",redirect:"/login"}]});u.a.defaults.timeout=3e4,u.a.interceptors.request.use(function(e){if(e.data)for(var t in e.data)null==e.data[t]&&delete e.data[t];if(e.params)for(var t in e.params)null==e.params[t]&&delete e.params[t];return e},function(e){return i.Message.error({message:"请求超时!"}),o.a.reject(e)}),u.a.interceptors.response.use(function(e){if(1004!==e.data.code)return 0===e.data.code||0===e.data.errcode?e.data:(i.Message.error({message:e.data.msg}),o.a.reject(e.data.msg));i.Message.warning({message:"登录失效,请重新登录"}),p.a.clearAll(),h.push("/login")},function(e){return i.Message.error({message:"加载失败"}),o.a.reject(e)});var d=u.a,m=n("NYxO"),f={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var g=n("VU/8")({name:"App"},f,!1,function(e){n("q0l2")},null,null).exports,v=n("IcnI");n("d4tr");c.default.use(m.a),c.default.use(a.a,{size:"medium",zIndex:3e3}),c.default.config.productionTip=!1,c.default.prototype.$axios=d,h.beforeEach(function(e,t,n){navigator.userAgent.toLowerCase().indexOf("webkit")<=-1&&!v.a.state.hasDisplaySysTip?(v.a.state.hasDisplaySysTip=!0,n({path:"/systemTip"})):e.meta.whitePath?n():v.a.dispatch("checkLogin",{success:function(t){t.permissionData.permList.indexOf(e.path)>=0?n():n({path:t.permissionData.permList[0]})},error:function(){n({path:"/login",query:{url:e.path}})}}).catch(function(t){console.log(t),n({path:"/login",query:{rurl:e.path}})})}),new c.default({el:"#app",store:v.a,router:h,components:{App:g},template:"<App/>"})},T452:function(e,t,n){"use strict";t.a={env:"production",cosAccount:{url:"https://download.aijiatui.com",bucket:"resource-1255821078",region:"ap-guangzhou"},global:{test:{client_id:5225772235379639,host:"https://dev-business.aiplussales.cn",auth_host:"/api2",system_id:1017},production:{auth_host:"https://usercenter.aijiatui.com",host:"https://business.aiplussales.cn",client_id:451052382690198,system_id:1014},dev:{auth_host:"https://dev-user-center.aijiatui.com",host:"https://dev-business.aiplussales.cn",client_id:5225772235379639,system_id:1017}}}},d4tr:function(e,t){},gyMJ:function(e,t,n){"use strict";var i=n("T452"),a=i.a.global[i.a.env].host,s=i.a.global[i.a.env].auth_host,o={loginApi:s+"/api/user/auth-ticket",getUserInfoApi:s+"/api/user/getuserinfo",getUserPermissionApi:s+"/api/user/get-user-permission",whiteApplyListApi:a+"/api/business/whitepages/apply_list",whiteCreateApi:a+"/api/business/whitepages/create",whiteDetailApi:a+"/api/business/whitepages/apply-detail",whiteCancelApi:a+"/api/business/whitepages/revoke",whiteAuditListApi:a+"/api/business/whitepages/audit_list",whiteAuditApi:a+"/api/business/whitepages/audit",whiteParamsApi:a+"/api/business/whitepages/params",userListApi:a+"/api/business/users/query",userOperateApi:a+"/api/business/users/operate",usersExportInfoApi:a+"/api/business/users/export-info",usersExportQrcodeApi:a+"/api/business/users/export-qrcode",userRelationQueryApi:a+"/api/business/relation/query",relationExportApi:a+"/api/business/relation/export",relationAddApi:a+"/api/business/relation/add"};t.a=o},q0l2:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.c41a1e52d1d05dc5967b.js.map