webpackJsonp([7],{vlsn:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Dd8w"),s=a.n(i),l=a("gyMJ"),r=(a("NYxO"),a("fAxu")),n=a("x8XE"),o=a.n(n),u={components:{},watch:{},data:function(){return{exportIds:"",searchObj:{uid:"",lock_uid:"",parent_uid:"",type:null},identifyType:o.a.identifyType,listData:[],loading:!1,multipleSelection:[],page:1,pageSize:10,total:0,dialogVisible:!1,addInviterObj:{uid:null,parent_uid:null},rules:{parent_uid:[{validator:r.a.checkInviterId,trigger:"blur"}]}}},computed:{downloadUrl:function(){return l.a.relationExportApi+"?ids="+this.exportIds}},created:function(){this.getList()},mounted:function(){},methods:{isExport:function(){return!!(this.searchObj.uid||this.searchObj.lock_uid||this.searchObj.parent_uid||[1,2,3].indexOf(Number(this.searchObj.type))>=0)},getList:function(){var t=this;this.loading=!0,this.$axios.post(l.a.userRelationQueryApi,s()({page:this.page-1,page_size:this.pageSize},this.searchObj,{is_export:this.isExport()})).then(function(e){t.loading=!1,t.listData=(e.data.result||{}).list||[],t.total=Number((e.data.result||{}).total||0),t.exportIds=(e.data.result||{}).ids||""})},search:function(){""!=this.searchObj.uid.trim()&&(isNaN(this.searchObj.uid)||Number(this.searchObj.uid)<=0)?this.$message.warning("用户ID请输入大于0的数字"):""!=this.searchObj.lock_uid.trim()&&(isNaN(this.searchObj.lock_uid)||Number(this.searchObj.lock_uid)<=0)?this.$message.warning("锁定人ID请输入大于0的数字"):""!=this.searchObj.parent_uid.trim()&&(isNaN(this.searchObj.parent_uid)||Number(this.searchObj.parent_uid)<=0)?this.$message.warning("邀请人请输入大于0的数字"):(this.page=1,this.getList())},reset:function(){this.searchObj={uid:"",lock_uid:"",parent_uid:"",type:null}},addInviter:function(t){this.dialogVisible=!0,this.addInviterObj.uid=t.uid,this.$refs.ruleForm&&this.$refs.ruleForm.resetFields()},submitInviter:function(){var t=this;this.$refs.ruleForm.validate(function(e){if(!e)return console.log("error submit!!"),!1;t.$axios.post(l.a.relationAddApi,t.addInviterObj).then(function(e){e.data&&1===e.data.result?(t.$message.success("添加邀请人成功！"),t.getList()):t.$message.success(e.msg||"操作失败")})})},handleSelectionChange:function(t){this.multipleSelection=[];for(var e=0;e<t.length;e++)this.multipleSelection.push(t[e].uid)},getListbyPage:function(t){this.page=t,this.getList()}},filters:{filterType:function(t){return o.a.getLabelByValue(o.a.identifyType,t)}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"search-box mt20"},[a("div",{staticClass:"field"},[a("label",[t._v("用户ID")]),t._v(" "),a("el-input",{staticClass:"width200",attrs:{placeholder:"请输入用户ID"},model:{value:t.searchObj.uid,callback:function(e){t.$set(t.searchObj,"uid","string"==typeof e?e.trim():e)},expression:"searchObj.uid"}})],1),t._v(" "),a("div",{staticClass:"field"},[a("label",[t._v("锁定人用户ID")]),t._v(" "),a("el-input",{staticClass:"width200",attrs:{placeholder:"锁定人用户ID"},model:{value:t.searchObj.lock_uid,callback:function(e){t.$set(t.searchObj,"lock_uid","string"==typeof e?e.trim():e)},expression:"searchObj.lock_uid"}})],1),t._v(" "),a("div",{staticClass:"field"},[a("label",[t._v("邀请人用户ID")]),t._v(" "),a("el-input",{staticClass:"width200",attrs:{placeholder:"请输入邀请人用户ID"},model:{value:t.searchObj.parent_uid,callback:function(e){t.$set(t.searchObj,"parent_uid","string"==typeof e?e.trim():e)},expression:"searchObj.parent_uid"}})],1),t._v(" "),a("div",{staticClass:"field"},[a("label",[t._v("身份")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.searchObj.type,callback:function(e){t.$set(t.searchObj,"type",e)},expression:"searchObj.type"}},t._l(t.identifyType,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("div",{staticClass:"field"},[a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")]),t._v(" "),a("el-button",{on:{click:t.reset}},[t._v("重置")])],1)]),t._v(" "),a("div",{staticClass:"align-right"},[a("el-button",{attrs:{type:"primary",disabled:!t.exportIds}},[t.exportIds?a("a",{staticStyle:{color:"#fff"},attrs:{href:t.downloadUrl}},[t._v("批量导出信息")]):a("span",[t._v("批量导出信息")])])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"mt10",attrs:{border:"",data:t.listData},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{prop:"uid",label:"用户ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"type",label:"身份"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("filterType")(e.row.type)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"lock_uid",label:"锁定人ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"lock_type",label:"锁定人身份"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("filterType")(e.row.lock_type)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"par_uid",label:"邀请人ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"par_type",label:"邀请人身份"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("filterType")(e.row.par_type)))])]}}])})],1),t._v(" "),t.listData.length>0?a("div",{staticClass:"pag-block"},[a("div",{staticClass:"fl"},[t._v("每页"+t._s(t.pageSize)+"条，共 "+t._s(t.total)+" 条记录 第 "+t._s(t.page)+"/"+t._s(t.total)+" 页")]),t._v(" "),a("el-pagination",{staticClass:"fr",attrs:{"current-page":t.page,background:"",layout:"prev, pager, next, jumper","page-size":t.pageSize,total:t.total},on:{"current-change":t.getListbyPage}})],1):t._e(),t._v(" "),a("el-dialog",{attrs:{title:"添加邀请人",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.addInviterObj,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"邀请人ID",prop:"parent_uid"}},[a("el-input",{attrs:{type:"text",autocomplete:"off",placeholder:"请输入邀请人ID"},model:{value:t.addInviterObj.parent_uid,callback:function(e){t.$set(t.addInviterObj,"parent_uid",e)},expression:"addInviterObj.parent_uid"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitInviter}},[t._v("提 交")])],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(u,c,!1,function(t){a("zhJ+")},"data-v-b418871a",null);e.default=d.exports},"zhJ+":function(t,e){}});
//# sourceMappingURL=7.6febbbbc21b6cd5128a0.js.map